{"version":3,"sources":["../src/index.js"],"names":["FlickityComponent","props","state","flickityReady","flickityCreated","cellCount","carousel","flkty","prevProps","prevState","children","options","draggable","initialIndex","reloadOnUpdate","deactivate","selectedIndex","undefined","length","activate","reloadCells","canUseDOM","Flickity","require","flickityRef","setReady","setState","setFlickityToReady","disableImagesLoaded","mountNode","querySelector","element","setTimeout","React","Children","count","createElement","elementType","className","ref","c","renderPortal","Component","propTypes","PropTypes","array","string","bool","func","object","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport imagesloaded from 'imagesloaded';\nimport { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nimport PropTypes from 'prop-types';\n\nclass FlickityComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      flickityReady: false,\n      flickityCreated: false,\n      cellCount: 0,\n    };\n\n    this.carousel = null;\n    this.flkty = null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      children,\n      options: { draggable, initialIndex },\n      reloadOnUpdate,\n    } = this.props;\n    const { flickityReady } = this.state;\n    if (reloadOnUpdate || (!prevState.flickityReady && flickityReady)) {\n      this.flkty.deactivate();\n      this.flkty.selectedIndex = initialIndex || 0;\n      this.flkty.options.draggable =\n        draggable === undefined\n          ? children\n            ? children.length > 1\n            : false\n          : draggable;\n      this.flkty.activate();\n    } else {\n      this.flkty.reloadCells();\n    }\n  }\n\n  componentDidMount() {\n    if (!canUseDOM) return null;\n    const Flickity = require('flickity');\n    const { flickityRef, options } = this.props;\n    this.flkty = new Flickity(this.carousel, options);\n    if (flickityRef) flickityRef(this.flkty);\n    if (this.props.static) {\n      this.setReady();\n    } else {\n      this.setState({ flickityCreated: true });\n    }\n  }\n\n  setReady() {\n    if (this.state.flickityReady) return;\n    const setFlickityToReady = () => this.setState({ flickityReady: true });\n    if (this.props.disableImagesLoaded) setFlickityToReady();\n    else imagesloaded(this.carousel, setFlickityToReady);\n  }\n\n  renderPortal() {\n    if (!this.carousel) return null;\n    const mountNode = this.carousel.querySelector('.flickity-slider');\n    if (mountNode) {\n      const element = createPortal(this.props.children, mountNode);\n      setTimeout(() => this.setReady(), 0);\n      const cellCount = React.Children.count(this.props.children);\n      if (cellCount !== this.state.cellCount)\n        this.setState({ flickityReady: false, cellCount });\n      return element;\n    }\n  }\n\n  render() {\n    return React.createElement(\n      this.props.elementType,\n      {\n        className: this.props.className,\n        ref: c => {\n          this.carousel = c;\n        },\n      },\n      this.props.static ? this.props.children : this.renderPortal()\n    );\n  }\n}\n\nFlickityComponent.propTypes = {\n  children: PropTypes.array,\n  className: PropTypes.string,\n  disableImagesLoaded: PropTypes.bool,\n  elementType: PropTypes.string,\n  flickityRef: PropTypes.func,\n  options: PropTypes.object,\n  reloadOnUpdate: PropTypes.bool,\n  static: PropTypes.bool,\n};\n\nFlickityComponent.defaultProps = {\n  className: '',\n  disableImagesLoaded: false,\n  elementType: 'div',\n  options: {},\n  reloadOnUpdate: false,\n  static: false,\n};\n\nexport default FlickityComponent;\n"],"file":"index.js"}